---
# yamllint disable rule:line-length
argument_specs:
  main:
    short_description: "Prometheus Proxmox VE Exporter"
    description:
      - "Deploy prometheus L(pve exporter,https://github.com/prometheus-pve/prometheus-pve-exporter) using ansible"
    author:
      - "Prometheus Community"
    options:
      pve_exporter_home:
        description: "Home of pve_exporter user and base file locations"
        default: "/var/lib/pve_exporter"
      pve_exporter_virtualenv:
        description: "Python virtualenv filepath for pve_exporter"
        default: "/var/lib/pve_exporter/venv"
      pve_exporter_auth_user:
        description: "Authentication PVE user name if using user/password auth"
        default: "prometheus@pve"
      pve_exporter_auth_pass:
        description: "Authentication PVE user password if using user/password auth"
      pve_exporter_auth_verify_ssl:
        description: "Validate proxmox certificate or not"
        type: bool
        default: true
      pve_exporter_auth_token_name:
        description: "Authentication PVE user token name if using token auth"
        default: your-token-id
      pve_exporter_auth_token_value:
        description: "Authentication PVE user token value from `pveum user token add ...`"
      pve_exporter_config_template:
        description: "Configuration template for pve_exporter"
        default: "pve_exporter.yml.j2"
      pve_exporter_version:
        description: "Proxmox VE Exporter package version. Also accepts latest as parameter."
        default: "1.0.0"
      pve_exporter_web_listen_address:
        description: "Address on which pve exporter will listen"
        default: "0.0.0.0:15353"
      pve_exporter_enabled_collectors:
        description:
          - "List of dicts defining additionally enabled collectors and their configuration."
          - "It adds collectors to L(those enabled by default,https://github.com/prometheus-pve/prometheus-pve-exporter#enabled-by-default)."
        type: "list"
        default:
          - systemd
          - textfile:
              directory: "{{ pve_exporter_textfile_dir }}"
      pve_exporter_disabled_collectors:
        description:
          - "List of disabled collectors."
          - "By default pve_exporter disables collectors listed L(here,https://github.com/prometheus-pve/prometheus-pve-exporter#disabled-by-default)."
        type: "list"
        elements: "str"
      pve_exporter_textfile_dir:
        description:
          - "Directory used by the L(Textfile Collector,https://github.com/prometheus-pve/prometheus-pve-exporter#textfile-collector)."
          - "To get permissions to write metrics in this directory, users must be in C(pve-exp) system group."
          - "B(Note:) More information in TROUBLESHOOTING.md guide."
        default: "/var/lib/pve_exporter"
      pve_exporter_tls_server_config:
        description:
          - "Configuration for TLS authentication."
          - "Keys and values are the same as in L(pve_exporter docs,https://prometheus.io/docs/prometheus/latest/configuration/https/)."
        type: "dict"
      pve_exporter_http_server_config:
        description:
          - "Config for HTTP/2 support."
          - "Keys and values are the same as in L(pve_exporter docs,https://prometheus.io/docs/prometheus/latest/configuration/https/)."
        type: "dict"
      pve_exporter_basic_auth_users:
        description: "Dictionary of users and password for basic authentication. Passwords are automatically hashed with bcrypt."
        type: "dict"
      pve_exporter_system_group:
        description:
          - "I(Advanced)"
          - "System group for pve exporter"
        default: "pve-exp"
      pve_exporter_system_user:
        description:
          - "I(Advanced)"
          - "Proxmox VE Exporter user"
        default: "pve-exp"
      pve_exporter_config_dir:
        description: "Path to directory with pve_exporter configuration"
        default: "/etc/pve_exporter"
      pve_exporter_set_credential:
        description:
          - "I(Advanced)"
          - "Create pve_exporter user in proxmox"
        type: bool
        default: false
      pve_exporter_no_log:
        description:
          - "I(Advanced)"
          - "Display/Log ansible tasks containing secrets"
        type: bool
        default: true
